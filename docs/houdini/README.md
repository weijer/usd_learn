# 为什么要使用USD

USD三维场景通用描述

1. 将成为主流的三维数据交换格式，比.abc、.fbx等更易用，功能更全面
2. USD是一种革新的CG工作流（数据交换、资产迭代、资产导入、场景layout，打灯、渲染）
3. 所有USD操作都是非破坏性的

# 什么是Prim？

1. 三维场景中的每一个元素（模型、灯光、变换、渲染设置……）都叫做Prim
2. 大纲全部展开后，每一行都是一个Prim
3. 最根部的 / 也是 Prim
4. Prim 有类型，有层级关系

## 什么是Property?

Prim是个三维数据容器，容器内的数据是一个个Property，它由三部分构成。

| 属性名      | 描述                                    |
|----------|---------------------------------------|
| Name     | 名称                                    |
| Value    | 值                                     |
| MetaData | 元数据（数据类型、默认值、是否随时间改变、插值方式、文档，是否自定义……） |

> 常见的 MetaData 

| 键名            | 说明                      |
|---------------|-------------------------|
| typeName      | 数据类型                    |
| custom        | 是个自定义                   |
| customData    | 自定义属性数据，当custom为True起作用 |
| variability   | 是否随时间改变                 |
| documentation | 文档描述                    |
| interpolation | 插值方式（点、线、面）             |
| default       | 默认值                     |

##  Property 分两种类型

### 1. Attribute 属性

不同的Prim都有其属性预设，也可以添加自定义属性。
>自定义属性，例如可以添加 teones:task_id 属性来保存任务id数据

Primvar是特殊的Attribute，一般来说Primvar是提供给渲染器使用。
>例如 mesh中常常有个 primvars:st 属性，它是 uv 提供给渲染器来使用的

### 2. Relationship 关系

常见的有材质关系他会链接到一个材质路径上面。

### 3. 7种属性颜色的意义

| 颜色名                | 描述                                               |
|--------------------|--------------------------------------------------|
| 灰色（No Value）       | 无值，有些属性不应该有默认值，所以默认不给赋值                          |
| 黄色（Fallback Value） | 备用值，但是他实际上起到的效果是默认值。用户未赋值，但又不宜为空则取该值，USD会自动处理    |
| 蓝色（Default Value）  | 恒定值，值不会随着时间改变                                    |
| 绿色（Time Samples）   | 每隔一段时间（通常是每帧）存储一个值，这个值可能随时间变化，也可能不变（不变意味着浪费存储空间） |
| 粉色（Value Clips）    | 值来自Value Clip，可用于大场景群集动画等                        |
| 红色（RelationShip）   | 值是一个或几个prim path，例如：灯光链接，阴影链接，材质链接，代理几何体链接，集合    |
| 紫色（Computed Value） | USD自动计算的值                                        |